# 물리 계층과 데이터링크 계층
네트워크 엔지니어가 아닌 개발자도 이 부분을 알아야 할까? 그렇다
- (네트워크) 인프라도 코드로 다루는 시대
- 사용 사례가 많음
## 이더넷이란
현대 LAN, 특히 유선 LAN 환경에서 가장 대중적으로 사용되는 기술
### 국제 표준으로써의 이더넷
IEEE 802.3이라는 이름으로 국제 표준이 됨
- 버전은 뒤에 알파벳으로 표시: 802.3u 등
- 이더넷 표준에 따라 지원되는 네트워크 장비, 통신 매체의 종류, 전송 속도 등이 달라짐
## 이더넷과 통신 매체
### 이더넷 표준에 따라 통신 매체의 종류, 속도가 달라진다?  
이더넷 표준에 따라 케이블이 모두 다른건 아니고    
보통 다음과 같이 표기한다
- <전송속도>\<BASE>-<추가 특성>
### 전송 속도
- 숫자만 표기되어 있으면 Mbps 속도  
- 숫자 뒤에 G가 붙으면 Gbps 속도  
- ex) 100Base-T 는 100Mbps, 10GBase-T는 10Gbps  
### Base
- Base는 베이스밴드의 약자로, 변조 타입을 의미
- 변조 타입: 비트 신호로 변환된 데이터를 통신 매체로 전송하는 방법
### 추가 특성
- 통신 매체의 특성을 명시
    - 전송 가능한 최대 거리
    - 물리 계층 인코딩 방식
    - 레인 수 - 비트 시간을 옮길 수 있는 전송로 수
- 가장 중요한 추가 특성: **통신 매체의 종류**
### 통신 매체의 종류
- 추가 특성이
    - C: 동축 케이블
    - T: 트위스티드 페어 케이블
    - S: 단파장 광섬유 케이블
    - L: 장파장 광섬유 케이블
### 이더넷은 지금도 발전하는 중
- 고속 이더넷
    - 100Mbps
- 기가비트 이더넷
- 10기가비트 이더넷
## 이더넷 프레임
### (데이터링크 계층) 이더넷 네트워크에서 주고받는 프레임
- 캡슐화를 거쳐 송신됨: 상위 계층 정보 + 헤더 + 트레일러
    - 헤더: 프리앰블, **송/수신지 MAC 주소**, 타입/길이
    - 페이로드: 데이터
    - 트레일러: FCS
- 역캡슐화를 거쳐 수신됨
    - 헤더, 트레일러 제거 후 상위 계층으로 올려보냄
### 프리앰블
- 이더넷 프레임의 시작을 알리는 8바이트의 정보
- 첫 7바이트는 10101010의 값, 마지막 바이트는 10101011 값을 가짐
- 송수진지 간의 동기화를 위해 사용되는 정보
### 수신지 MAC 주소와 송신지 MAC 주소
- '물리적 주소' 라고도 불림
- 일반적으로 고유하고, 변경되지 않는 주소
- MAC 주소는 **네트워크 인터페이스마다** 부여되는 6바이트 길이의 주소
    - LAN 내의 송수신지 특정
    - 일반적으로 NIC(Network Interface Controller) 장치가 네트워크 인터페이스 역할을 담당
    - 한 컴퓨터에 MAC 주소도 여러 개 있을 수 있음
### 타입/길이
- 타입 혹은 길이 명시
- 필드에 명시된 크기가 1500(16진수 05DC) 이하인 경우: 이 필드는 프레임의 크기
- 필드에 명시된 크기가 1536(16진수 0600) 이상인 경우: 이 필드는 타입
- 타입이란?
    - 이더타입이라고도 함
    - '어떤 정보를 캡슐화했는지'
    - 대표적으로 상위 계층에서 사용된 프로토콜 
### 데이터
- 페이로드: 상위 계층에서 전달받거나 전달해야 할 내용
- 최대 크기: 1500바이트
- 최소 크기: 46바이트
    - 46바이트보다 작으면 패딩으로 채워짐
### FCS (Frame Check Sequence)
- 오류 검출용 정보: FCS는 수신한 이더넷 프레임에 오류가 있는지 확인하기 위한 필드
    - 이 필드에는 CRC (Cycle Redundancy Check)라는 오류 검출용 값이 명시됨
## NIC와 케이블
### NIC (Network Interface Controller)
- 호스트와 통신 매체를 연결하고, MAC 주소가 부여되는 네트워크 장비
    - 주로 마더보드 내장이나 usb로 연결 가능한 형태
- NIC는 MAC 주소를 인식
    - 자신과는 관련 없는 수신지 MAC 주소이면 프레임 폐기
    - FCS 필드를 토대로 오류를 검출해 잘못된 프레임 폐기
- NIC마다 지원되는 속도가 다르고 이는 네트워크 속도에 영향을 끼침

### 케이블
- 케이블은 NIC에 연결되는 물리 계층의 통신 매체
- 트위스티드 페어 케이블
    - 구리 선으로 전기 신호를 주고받는 통신 매체
    - 구리 선은 노이즈에 민감해서 브레이브 실드나 포일 실드 사용
        - STP, FTP, UTP
        - XX/YTP (Twisted Pair) 처럼 나타냄
        - ex) S/FTP, SF/FTP, U/UTP
    - 카테고리에 따른 트위스티드 페어 케이블 분류
        - 카테고리가 높을수록
        - 지원 가능한 대역폭이 높아짐
        - 송수신 가능한 데이터의 양이 많아짐
        - 일반적으로 더 빠른 전송 가능
        - ex) Cat5, Cat5e, Cat8
- 광섬유 케이블
    - 빛(광신호)을 이용해 정보를 주고받는 케이블
    - 전기 신호에 비해 빠르고 멀리까지 전송 가능
    - 노이즈도 적음 
    - 광섬유 중심에는 코어가 있고 코어를 감싸는 클래딩이 있음
    - 코어의 지름에 따라 종류
        - 싱글 모드 광섬유 케이블
            - 코어의 지름이 작으면 경로가 하나 이상을 갖기 어려움
            - 장거리에 적합
        - 멀티 모드 광섬유 케이블
            - 빛이 여러 경로로 이동할 수 있음
            - 손실이 있을 수 있어 단거리에 적합



